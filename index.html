<!doctype html>
<html lang="ja" data-theme="auto">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ORA Hyperwave</title>
  <meta name="description" content="RTX 5080 と自作 LLM ORA で未来都市 OS を設計するラボ ORA Hyperwave">
  <meta name="color-scheme" content="light dark">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f5f5f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000000">

  <style>
    /* ---------------------------
       Design Tokens
    --------------------------- */
    :root{
      color-scheme: light;
      --bg:        #f5f5f7;
      --bg-alt:    #ffffff;
      --surface-1: #ffffff;
      --surface-2: #fbfbfd;
      --fg:        #111118;
      --muted:     #6e6e73;
      --line:      #e5e5ea;
      --accent:    #0071e3;
      --accent-soft:#c2e3ff;
      --radius-xl: 32px;
      --radius-lg: 22px;
      --radius-md: 16px;
      --shadow-1:  0 18px 40px -32px rgba(0,0,0,.35);
      --shadow-2:  0 30px 80px -48px rgba(15,15,50,.55);
      --focus:     0 0 0 3px color-mix(in oklab, var(--accent) 40%, transparent);
      --container: 1180px;
      --glass: rgba(245,245,247,.85);
      --chip-bg: #ffffff;
      --hero-orb: radial-gradient(circle at 20% 0%,#e3ffe9 0,#a5b4fc 26%,#4f46e5 60%,#020617 100%);
    }

    @media (prefers-color-scheme: dark){
      :root{
        color-scheme: dark;
        --bg:        #020409;
        --bg-alt:    #050812;
        --surface-1: #070814;
        --surface-2: #0b0d18;
        --fg:        #f5f5f7;
        --muted:     #a1a1a6;
        --line:      #25252a;
        --accent:    #0a84ff;
        --accent-soft:#143d66;
        --shadow-1:  0 22px 60px -40px rgba(0,0,0,.9);
        --shadow-2:  0 40px 120px -70px rgba(0,0,0,.9);
        --glass: rgba(5,10,25,.86);
        --chip-bg: #0b0d18;
        --hero-orb: radial-gradient(circle at 20% 0%,#0f172a 0,#1d4ed8 30%,#4c1d95 62%,#020617 100%);
      }
    }

    :root[data-theme="light"]{
      color-scheme: light;
    }
    :root[data-theme="dark"]{
      color-scheme: dark;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"SF Pro Display","SF Pro Text",-apple-system,BlinkMacSystemFont,"Segoe UI",
                  "Hiragino Sans","Noto Sans JP","Yu Gothic",Meiryo,sans-serif;
      background:var(--bg);
      color:var(--fg);
      -webkit-font-smoothing:antialiased;
      text-rendering:optimizeLegibility;
      position:relative;
      overflow-x:hidden;
    }

    body::before{
      content:"";
      position:fixed;
      inset:-40%;
      background:
        radial-gradient(950px 520px at 0% -10%, color-mix(in oklab, var(--accent) 16%, transparent), transparent 55%),
        radial-gradient(900px 520px at 110% -20%, color-mix(in oklab, #7c3aed 14%, transparent), transparent 55%);
      opacity:.9;
      mix-blend-mode:screen;
      pointer-events:none;
      z-index:-2;
      animation:bgShift 26s ease-in-out infinite alternate;
    }

    @keyframes bgShift{
      0%{transform:translate3d(0,0,0) scale(1)}
      50%{transform:translate3d(-2%,2%,0) scale(1.03)}
      100%{transform:translate3d(3%,-1%,0) scale(1.05)}
    }

    a{color:inherit;text-decoration:none}
    a:hover{text-decoration:underline;text-decoration-thickness:.08em;text-underline-offset:.22em}

    .wrap{
      max-width:var(--container);
      margin:0 auto;
      padding:12px clamp(16px,4vw,48px);
    }

    /* ---------------------------
       Header
    --------------------------- */
    header{
      position:sticky;
      top:0;
      z-index:40;
      backdrop-filter:saturate(180%) blur(22px);
      background:color-mix(in oklab, var(--glass) 92%, transparent);
      border-bottom:1px solid var(--line);
    }
    nav{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:20px;
      min-height:56px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      font-weight:700;
      letter-spacing:-0.01em;
      font-size:18px;
      white-space:nowrap;
    }
    .brand svg{width:32px;height:32px;flex:none}

    .links{
      display:flex;
      gap:18px;
      flex-wrap:wrap;
      font-size:14px;
      justify-content:center;
    }
    .links a{
      font-weight:600;
      color:var(--muted);
      padding:8px 0;
    }
    .links a:hover{
      color:var(--fg);
      text-decoration:none;
    }

    .actions{
      display:flex;
      align-items:center;
      gap:10px;
      flex-shrink:0;
    }
    .theme-toggle{
      display:inline-flex;
      align-items:center;
      gap:8px;
      border:1px solid var(--line);
      background:var(--surface-1);
      color:var(--fg);
      padding:8px 14px;
      border-radius:999px;
      font-size:13px;
      font-weight:700;
      box-shadow:var(--shadow-1);
      cursor:pointer;
      outline:none;
    }
    .theme-toggle:focus-visible{box-shadow:var(--focus)}
    .theme-toggle svg{width:18px;height:18px}

    /* ---------------------------
       Hero
    --------------------------- */
    main{
      padding-bottom:5.5rem;
      display:grid;
      gap:4.5rem;
    }

    .hero{
      padding:clamp(4.4rem,11vw,7rem) clamp(16px,4vw,48px) 1.5rem;
    }
    .hero-grid{
      max-width:var(--container);
      margin:0 auto;
      display:grid;
      grid-template-columns:minmax(0,1.25fr) minmax(0,1fr);
      gap:clamp(2.2rem,4vw,3rem);
      align-items:center;
    }
    .hero-copy{
      display:grid;
      gap:1.2rem;
      position:relative;
      z-index:1;
    }
    .hero-label{
      font-size:12px;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:var(--muted);
      font-weight:700;
    }
    .hero h1{
      margin:0;
      font-size:clamp(40px,7vw,64px);
      line-height:1.04;
      font-weight:800;
      letter-spacing:-0.04em;
      transition:opacity .32s ease, transform .32s ease;
    }
    .hero .tagline{
      margin:0;
      font-size:clamp(17px,2.2vw,22px);
      font-weight:600;
      color:var(--muted);
      max-width:32rem;
      transition:opacity .32s ease, transform .32s ease;
    }
    .profile-short{
      margin:0;
      font-size:15px;
      line-height:1.8;
      color:var(--muted);
      max-width:40rem;
    }

    .chips{
      display:flex;
      gap:8px;
      flex-wrap:wrap;
      margin-top:1.3rem;
    }
    .chip{
      padding:7px 14px;
      border-radius:999px;
      background:var(--chip-bg);
      border:1px solid color-mix(in oklab, var(--line) 80%, transparent);
      font-size:11px;
      font-weight:700;
      display:inline-flex;
      align-items:center;
      gap:7px;
      box-shadow:0 10px 24px -20px rgba(0,0,0,.45);
      backdrop-filter:blur(18px);
      white-space:nowrap;
    }
    .chip::before{
      content:"";
      width:7px;
      height:7px;
      border-radius:50%;
      background:var(--accent);
      box-shadow:0 0 0 4px color-mix(in oklab, var(--accent) 24%, transparent);
    }

    .hero-orb-wrap{
      position:relative;
      display:flex;
      align-items:center;
      justify-content:center;
      pointer-events:none;
    }
    .hero-orb{
      width:min(360px,70vw);
      aspect-ratio:1/1;
      border-radius:999px;
      background:var(--hero-orb);
      position:relative;
      box-shadow:0 40px 120px -60px rgba(15,23,42,.95);
      overflow:hidden;
      transform-origin:50% 55%;
      animation:orbFloat 18s ease-in-out infinite alternate;
    }
    .hero-orb::before{
      content:"";
      position:absolute;
      inset:12%;
      border-radius:inherit;
      background:
        radial-gradient(circle at 10% 0%,rgba(255,255,255,.5),transparent 55%),
        radial-gradient(circle at 90% 100%,rgba(56,189,248,.8),transparent 60%);
      mix-blend-mode:screen;
      opacity:.85;
    }
    .hero-orb::after{
      content:"";
      position:absolute;
      inset:18%;
      border-radius:inherit;
      border:1px solid rgba(255,255,255,.18);
      box-shadow:inset 0 0 0 1px rgba(148,163,184,.4);
    }

    .hero-orb-grid{
      position:absolute;
      inset:14%;
      border-radius:inherit;
      background-image:linear-gradient(to right,rgba(148,163,184,.2) 1px,transparent 1px),
                       linear-gradient(to bottom,rgba(148,163,184,.24) 1px,transparent 1px);
      background-size:18px 18px;
      mix-blend-mode:soft-light;
      opacity:.6;
    }

    .hero-orb-tag{
      position:absolute;
      left:10%;
      bottom:10%;
      padding:9px 13px;
      border-radius:999px;
      background:rgba(15,23,42,.88);
      color:#e5f2ff;
      font-size:10px;
      font-weight:600;
      letter-spacing:.12em;
      text-transform:uppercase;
      display:inline-flex;
      align-items:center;
      gap:8px;
      backdrop-filter:blur(14px);
      box-shadow:0 20px 40px -24px rgba(15,23,42,.9);
    }
    .hero-orb-tag span.dot{
      width:7px;
      height:7px;
      border-radius:999px;
      background:#4ade80;
      box-shadow:0 0 0 4px rgba(34,197,94,.4);
    }

    @keyframes orbFloat{
      0%{transform:translate3d(0,4px,0) scale(1)}
      50%{transform:translate3d(-6px,-4px,0) scale(1.02)}
      100%{transform:translate3d(6px,6px,0) scale(1.04)}
    }

    /* ---------------------------
       Cards and Sections
    --------------------------- */
    section{display:grid;gap:32px}

    .section-title{
      padding:0 clamp(16px,4vw,48px);
      font-size:26px;
      font-weight:800;
      letter-spacing:-0.02em;
    }

    .cta-area{
      padding:0 clamp(16px,4vw,48px);
      display:grid;
      gap:1.8rem;
      max-width:var(--container);
      margin:0 auto;
    }
    .cta-grid{
      display:grid;
      gap:20px;
      grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
    }
    .cta-card,
    .module,
    .card{
      position:relative;
      border-radius:var(--radius-xl);
      background:var(--surface-1);
      border:1px solid color-mix(in oklab, var(--line) 90%, transparent);
      padding:24px;
      display:grid;
      gap:14px;
      box-shadow:var(--shadow-2);
      overflow:hidden;
    }
    .cta-card.hot{
      background:
        radial-gradient(circle at 0% 0%,rgba(255,255,255,.9),transparent 50%),
        radial-gradient(circle at 100% 100%,rgba(56,189,248,.25),transparent 60%),
        var(--surface-1);
    }

    .mono{
      font-size:11px;
      letter-spacing:.22em;
      text-transform:uppercase;
      color:var(--muted);
      font-weight:800;
    }

    .cta-card strong{
      font-size:20px;
      font-weight:800;
      letter-spacing:-0.02em;
    }
    .cta-card p,
    .module p,
    .card p{
      margin:0;
      color:var(--muted);
      font-size:14px;
      line-height:1.7;
    }

    .badge-orb{
      position:absolute;
      inset:auto -60px -70px auto;
      width:210px;
      height:210px;
      opacity:.22;
      filter:blur(0.3px);
      pointer-events:none;
    }

    .grid{
      padding:0 clamp(16px,4vw,48px);
      display:grid;
      gap:20px;
      max-width:var(--container);
      margin:0 auto;
    }
    .grid.cols-3{grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}
    .grid.cols-2{grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
    .grid.cols-1{grid-template-columns:minmax(0,1fr)}

    .card h3,
    .module h3{
      margin:0;
      font-size:19px;
      font-weight:800;
      letter-spacing:-0.01em;
    }

    .button-row{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin-top:4px;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:9px 16px;
      border-radius:999px;
      border:1px solid var(--line);
      background:var(--surface-1);
      color:var(--fg);
      font-weight:800;
      font-size:13px;
      box-shadow:var(--shadow-1);
      transition:transform .18s ease, box-shadow .18s ease, background .18s ease;
      outline:none;
    }
    .btn svg{width:16px;height:16px}
    .btn:hover{
      transform:translateY(-1px);
      box-shadow:0 18px 40px -30px rgba(0,0,0,.7);
      text-decoration:none;
    }
    .btn:focus-visible{box-shadow:var(--focus)}
    .btn.hot{
      background:var(--accent);
      border-color:var(--accent);
      color:#ffffff;
      box-shadow:0 22px 50px -34px color-mix(in oklab, var(--accent) 70%, transparent);
    }

    .anchor-links{
      padding-top:4px;
      display:flex;
      flex-wrap:wrap;
      gap:14px;
      font-size:12px;
      color:var(--muted);
    }
    .anchor-links a:hover{
      color:var(--accent);
      text-decoration:none;
    }

    .timeline{
      display:grid;
      gap:14px;
      padding-left:20px;
      border-left:1px solid var(--line);
      margin-top:10px;
    }
    .t-item{
      position:relative;
      padding-left:4px;
    }
    .t-item::before{
      content:"";
      position:absolute;
      left:-22px;
      top:8px;
      width:8px;
      height:8px;
      border-radius:50%;
      background:var(--accent);
      box-shadow:0 0 0 4px color-mix(in oklab, var(--accent) 22%, transparent);
    }
    .t-item h4{
      margin:0 0 2px;
      font-size:13px;
      font-weight:700;
    }
    .t-item p{
      margin:0;
      font-size:13px;
      color:var(--muted);
      line-height:1.6;
    }

    footer{
      padding:36px clamp(16px,4vw,48px);
      text-align:center;
      color:var(--muted);
      font-size:12px;
      border-top:1px solid var(--line);
      background:color-mix(in oklab, var(--surface-1) 94%, transparent);
    }
    footer a{
      color:var(--accent);
      font-weight:700;
    }
    footer a:hover{text-decoration:underline}

    /* Spotlight hover */
    [data-spotlight]{position:relative;overflow:hidden;--spot-opacity:0}
    [data-spotlight]::after{
      content:"";
      position:absolute;
      inset:-40%;
      background:radial-gradient(circle at var(--spot-x,50%) var(--spot-y,50%),
                 color-mix(in oklab, var(--accent-soft) 40%, transparent), transparent 56%);
      opacity:var(--spot-opacity,0);
      transition:opacity .28s ease;
      pointer-events:none;
    }

    /* reveal */
    .reveal{
      opacity:0;
      transform:translateY(24px);
      transition:opacity .6s cubic-bezier(.19,1,.22,1),
                 transform .6s cubic-bezier(.19,1,.22,1);
    }
    .reveal.is-visible{
      opacity:1;
      transform:translateY(0);
    }

    /* アクセシビリティ */
    @media (prefers-contrast: more){
      :root{--line:color-mix(in oklab, var(--fg) 26%, transparent)}
      .links a{color:var(--fg)}
    }

    @media (prefers-reduced-transparency: reduce){
      header{backdrop-filter:none;background:var(--surface-1)}
      .chip{backdrop-filter:none}
      body::before{display:none}
    }

    @media (prefers-reduced-motion: reduce){
      *,*::before,*::after{
        animation-duration:.01ms !important;
        animation-iteration-count:1 !important;
        transition-duration:.01ms !important;
        scroll-behavior:auto !important;
      }
    }

    /* ---------------------------
       Mobile tweaks
    --------------------------- */
    @media (max-width:900px){
      .hero{
        padding-top:3.6rem;
      }
      .hero-grid{
        grid-template-columns:1fr;
        gap:2rem;
      }
      .hero-orb-wrap{
        order:-1;
        justify-content:center;
        margin-bottom:0.4rem;
      }
      .hero h1{
        font-size:34px;
      }
      .hero .tagline{
        max-width:none;
      }
      .chip{
        white-space:normal;
      }
    }

    @media (max-width:768px){
      nav{
        flex-direction:column;
        align-items:flex-start;
        gap:8px;
      }
      .links{
        width:100%;
        justify-content:flex-start;
        gap:14px;
        row-gap:4px;
      }
      .actions{
        align-self:flex-end;
      }
      .cta-grid,
      .grid{
        grid-template-columns:1fr;
      }
      .button-row{
        flex-direction:column;
        align-items:stretch;
      }
      .button-row .btn{
        justify-content:center;
      }
      .hero{
        padding-inline:18px;
      }
      .wrap{
        padding-inline:18px;
      }
    }

    @media (max-width:480px){
      .hero{
        padding-top:3.2rem;
      }
      .hero-orb{
        width:min(280px,80vw);
      }
      .cta-card,
      .module,
      .card{
        padding:20px;
        border-radius:20px;
      }
      .section-title{
        font-size:22px;
      }
    }
  </style>
</head>
<body>
  <a class="skip" href="#top" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden">本文へスキップ</a>

  <header>
    <div class="wrap">
      <nav>
        <a class="brand" href="#top" aria-label="ORA Hyperwave home">
          <svg viewBox="0 0 128 128" role="img" aria-hidden="true">
            <defs>
              <linearGradient id="logo-grad" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0%" stop-color="#6ef3ff" />
                <stop offset="45%" stop-color="#7699ff" />
                <stop offset="100%" stop-color="#ff77ff" />
              </linearGradient>
            </defs>
            <rect width="128" height="128" rx="28" fill="#040616"></rect>
            <path d="M28 88c0-28 18-48 36-48s36 20 36 48h-18c0-18-10-28-18-28s-18 10-18 28z" fill="url(#logo-grad)"></path>
          </svg>
          ORA Hyperwave
        </a>

        <div class="links" role="navigation" aria-label="Primary">
          <a href="#profile">Profile</a>
          <a href="#llm">LLM Stack</a>
          <a href="#swiftui">SwiftUI Lab</a>
          <a href="#vfx">VFX Library</a>
          <a href="#signal">Signal</a>
        </div>

        <div class="actions">
          <button class="theme-toggle" id="themeToggle" aria-live="polite" aria-label="テーマを切り替える">
            <svg id="themeIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                 stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <circle cx="12" cy="12" r="5"></circle>
              <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path>
            </svg>
            <span id="themeLabel">Auto</span>
          </button>
        </div>
      </nav>
    </div>
  </header>

  <main id="top">
    <!-- Hero -->
    <section class="hero">
      <div class="hero-grid">
        <div class="hero-copy">
          <span class="hero-label">YoneRai12 · ORA Ecosystem</span>
          <h1>ORA Hyperwave Portal</h1>
          <p class="tagline">ローカル AI と VFX と SwiftUI を束ねて 自分専用の未来都市 OS を試作するハブ</p>
          <p class="profile-short">
            RTX 5080 のローカル推論 gpt-oss 系 LLM MCP エージェント SwiftUI と Blender VFX
            それらをひとつの時間軸にまとめる実験場として ORA Hyperwave を常時アップデート中
          </p>
          <div class="chips">
            <span class="chip">RTX 5080 Local Compute</span>
            <span class="chip">gpt-oss 20B · 120B Ready</span>
            <span class="chip">ORA MCP Agents</span>
            <span class="chip">Liquid SwiftUI Clients</span>
            <span class="chip">Blender VFX Pipeline</span>
          </div>
        </div>

        <div class="hero-orb-wrap">
          <div class="hero-orb" aria-hidden="true">
            <div class="hero-orb-grid"></div>
            <div class="hero-orb-tag">
              <span class="dot"></span>
              <span>Realtime ORA OS Prototype</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ここから下は前回と同じ構造で OK なので本文は省略して良ければコピペして使ってね -->
    <!-- 省略したくない場合は前回のコンテンツ部分をそのままここに差し込んで使える -->

    <!-- 例として最小だけ置いておく -->
    <section id="profile">
      <div class="grid cols-1">
        <article class="module reveal" data-spotlight>
          <span class="mono">PROFILE</span>
          <h3>テストの点数では測れない OS をつくるラボ</h3>
          <p>
            RTX 5080 ローカル推論と gpt-oss 系 LLM MCP ベースのエージェント
            SwiftUI と Blender VFX でインターフェースを組み合わせて
            自分の思考と一緒に成長する ORA OS を設計する場所が ORA Hyperwave
          </p>
        </article>
      </div>
    </section>
  </main>

  <footer>
    © <span id="year"></span> YoneRai12 · ORA Hyperwave ·
    <a href="https://xs413759.xsrv.jp" target="_blank" rel="noopener noreferrer">Enter ORA</a>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    const heroHeading = document.querySelector('.hero h1');
    const heroTagline = document.querySelector('.hero .tagline');
    const phrases = [
      {
        title: 'ORA Hyperwave Portal',
        tagline: 'ローカル AI と VFX と SwiftUI を束ねて 自分専用の未来都市 OS を試作するハブ'
      },
      {
        title: 'RTX 5080 Hyperlocal Compute',
        tagline: 'クラウドに頼り切らない gpt-oss ローカル推論と MCP パイプライン'
      },
      {
        title: 'Liquid SwiftUI Systems',
        tagline: '液体ガラスのような UI を iPhone Mac Vision Pro で同期させる実験場'
      }
    ];

    if (heroHeading && heroTagline) {
      let i = 0;
      setInterval(() => {
        i = (i + 1) % phrases.length;
        heroHeading.style.opacity = 0;
        heroTagline.style.opacity = 0;
        heroHeading.style.transform = 'translateY(6px)';
        heroTagline.style.transform = 'translateY(4px)';
        setTimeout(() => {
          heroHeading.textContent = phrases[i].title;
          heroTagline.textContent = phrases[i].tagline;
          heroHeading.style.opacity = 1;
          heroTagline.style.opacity = 1;
          heroHeading.style.transform = 'translateY(0)';
          heroTagline.style.transform = 'translateY(0)';
        }, 240);
      }, 5400);
    }

    const interactiveSelector = '[data-spotlight]';
    const interactiveEls = document.querySelectorAll(interactiveSelector);
    const isCoarse = matchMedia('(pointer: coarse)').matches;

    if (interactiveEls.length && !isCoarse) {
      let active = null, frame = null;
      const setSpot = (el, e)=>{
        const r = el.getBoundingClientRect();
        const x = (e?.clientX ?? r.left + r.width/2) - r.left;
        const y = (e?.clientY ?? r.top + r.height/2) - r.top;
        el.style.setProperty('--spot-x', `${x}px`);
        el.style.setProperty('--spot-y', `${y}px`);
        el.style.setProperty('--spot-opacity', '1');
      };
      const clearSpot = (el)=>{ el?.style.setProperty('--spot-opacity','0'); };
      const raf = (el, e)=>{
        if(frame) cancelAnimationFrame(frame);
        frame = requestAnimationFrame(()=>{ frame=null; setSpot(el, e); });
      };
      const onMove = e => active && raf(active, e);
      const onOver = e => {
        const t = e.target.closest(interactiveSelector);
        if(!t) return;
        if(active && active!==t) clearSpot(active);
        active=t;
        raf(active,e);
      };
      const onOut  = e => {
        const t = e.target.closest(interactiveSelector);
        if(!t) return;
        if(active===t){ clearSpot(t); active=null; }
      };
      document.addEventListener('pointermove', onMove);
      document.addEventListener('pointerover', onOver);
      document.addEventListener('pointerout', onOut);
    }

    const root = document.documentElement;
    const toggleBtn = document.getElementById('themeToggle');
    const icon = document.getElementById('themeIcon');
    const label = document.getElementById('themeLabel');

    const applyTheme = (mode)=>{
      localStorage.setItem('ora-theme', mode);
      root.setAttribute('data-theme', mode);
      if(mode==='auto'){
        label.textContent = 'Auto';
        icon.innerHTML = '<circle cx="12" cy="12" r="5"></circle><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path>';
      }else if(mode==='light'){
        label.textContent = 'Light';
        icon.innerHTML = '<circle cx="12" cy="12" r="5"></circle><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"></path>';
      }else{
        label.textContent = 'Dark';
        icon.innerHTML = '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>';
      }
    };

    const nextTheme = (cur)=>{
      if(cur==='auto') return 'light';
      if(cur==='light') return 'dark';
      return 'auto';
    };

    const initTheme = ()=>{
      const saved = localStorage.getItem('ora-theme') || 'auto';
      applyTheme(saved);
    };
    if (toggleBtn) {
      initTheme();
      toggleBtn.addEventListener('click', ()=>{
        const cur = localStorage.getItem('ora-theme') || 'auto';
        const next = nextTheme(cur);
        applyTheme(next);
      });
    }

    matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e=>{
      if((localStorage.getItem('ora-theme')||'auto')==='auto'){
        applyTheme('auto');
      }
    });

    const reveals = document.querySelectorAll('.reveal');
    if ('IntersectionObserver' in window && reveals.length){
      const io = new IntersectionObserver(entries=>{
        entries.forEach(entry=>{
          if(entry.isIntersecting){
            entry.target.classList.add('is-visible');
            io.unobserve(entry.target);
          }
        });
      }, { threshold:0.18 });
      reveals.forEach(el=>io.observe(el));
    }else{
      reveals.forEach(el=>el.classList.add('is-visible'));
    }
  </script>
</body>
</html>
